{
  "_comment": "=================================================================",
  "_comment2": "NetNotes IODaemon Configuration File",
  "_comment3": "Location: ~/.netnotes/config (JSON or key=value format)",
  "_comment4": "All settings are optional - sensible defaults are used",
  "_comment5": "=================================================================",

  "socket": {
    "_comment": "Unix domain socket configuration",
    "path": "/run/netnotes/notedaemon.sock",
    "dir": "/run/netnotes",
    "group": "netnotes",
    "_permissions_note": "Octal format: 0660 = rw-rw---- (432 in decimal)",
    "permissions": 432
  },

  "logging": {
    "_comment": "Logging configuration",
    "level": "info",
    "_level_options": ["debug", "info", "warning", "error"],
    "stderr": false,
    "_stderr_note": "Set to true to also log to stderr (useful for debugging)"
  },

  "usb": {
    "_comment": "USB device configuration",
    "auto_detach_kernel": true,
    "_auto_detach_note": "Automatically detach kernel drivers when claiming devices",
    "timeout_ms": 100,
    "_timeout_note": "USB transfer timeout in milliseconds",
    "discovery_interval_ms": 1000,
    "_discovery_note": "How often to check for new USB devices"
  },

  "security": {
    "_comment": "Access control configuration",
    "require_group": true,
    "_require_group_note": "Require clients to be in socket group or allowed_groups",
    "allowed_groups": ["netnotes"],
    "_allowed_groups_note": "Additional groups that can access the daemon",
    "allow_root_bypass": true,
    "_root_bypass_note": "Allow root to bypass group checks"
  },

  "performance": {
    "_comment": "Performance and flow control settings",
    "max_queue_size": 1000,
    "_queue_note": "Maximum event queue size per device before backpressure",
    "polling_interval_us": 1000,
    "_polling_note": "Event polling interval in microseconds",
    "max_clients": 10,
    "_clients_note": "Maximum concurrent client connections",
    "thread_pool_size": 4,
    "_threads_note": "Number of worker threads for event processing"
  },

  "heartbeat": {
    "_comment": "Client heartbeat/keepalive settings",
    "enabled": true,
    "interval_ms": 5000,
    "_interval_note": "How often to send ping to clients",
    "timeout_ms": 15000,
    "_timeout_note": "Consider client dead after this timeout",
    "max_missed": 3,
    "_missed_note": "Number of missed pongs before disconnecting client"
  },

  "backpressure": {
    "_comment": "Flow control and backpressure settings",
    "max_unacknowledged": 100,
    "_unacked_note": "Max unacknowledged messages before pausing",
    "resume_threshold": 50,
    "_resume_note": "Resume when unacked drops below this",
    "stale_connection_ms": 30000,
    "_stale_note": "Mark connection stale after this inactivity"
  },

  "encryption": {
    "_comment": "Encryption settings (optional)",
    "enabled": false,
    "_enabled_note": "Enable encryption support (requires OpenSSL)",
    "key_size": 2048,
    "_key_size_note": "DH key size in bits (2048 or 4096)",
    "cipher": "aes-256-gcm",
    "_cipher_note": "Encryption cipher (aes-256-gcm recommended)"
  },

  "capabilities": {
    "_comment": "Default capability settings",
    "auto_detect": true,
    "_auto_detect_note": "Automatically detect device capabilities",
    "default_mode": "parsed",
    "_default_mode_note": "Default mode for known devices (raw, parsed, filtered)",
    "allow_raw_mode": true,
    "_raw_mode_note": "Allow clients to use raw HID mode",
    "allow_passthrough": false,
    "_passthrough_note": "Allow passthrough mode (forward to OS)"
  },

  "devices": {
    "_comment": "Device-specific settings",
    "keyboard": {
      "enabled": true,
      "default_mode": "parsed",
      "allow_modes": ["raw", "parsed", "filtered"],
      "filter_repeat_rate_ms": 50,
      "_filter_note": "Minimum time between repeat events"
    },
    "mouse": {
      "enabled": true,
      "default_mode": "parsed",
      "allow_modes": ["raw", "parsed", "filtered"],
      "high_precision": false,
      "_precision_note": "Enable high-precision mode if supported"
    },
    "gamepad": {
      "enabled": true,
      "default_mode": "parsed",
      "allow_modes": ["raw", "parsed"]
    },
    "touchpad": {
      "enabled": true,
      "default_mode": "parsed",
      "allow_modes": ["parsed", "filtered"]
    }
  },

  "filtering": {
    "_comment": "Event filtering configuration",
    "enabled": false,
    "_enabled_note": "Enable filtering capabilities",
    "debounce_ms": 10,
    "_debounce_note": "Debounce time for button events",
    "dead_zone": 0.05,
    "_dead_zone_note": "Analog stick dead zone (0.0-1.0)"
  },

  "monitoring": {
    "_comment": "Monitoring and diagnostics",
    "stats_enabled": true,
    "_stats_note": "Track performance statistics",
    "stats_interval_ms": 60000,
    "_stats_interval_note": "How often to log statistics",
    "event_logging": false,
    "_event_logging_note": "Log all events (very verbose, debug only)"
  },

  "compatibility": {
    "_comment": "Compatibility settings",
    "protocol_version": 1,
    "strict_validation": true,
    "_strict_note": "Strictly validate all protocol messages",
    "allow_legacy_clients": false,
    "_legacy_note": "Allow clients with older protocol versions"
  },

  "advanced": {
    "_comment": "Advanced settings (experts only)",
    "buffer_size": 8192,
    "_buffer_note": "Socket buffer size in bytes",
    "event_batch_size": 10,
    "_batch_note": "Number of events to batch before sending",
    "use_epoll": true,
    "_epoll_note": "Use epoll for event monitoring (Linux only)",
    "cpu_affinity": [],
    "_affinity_note": "CPU cores to pin threads to (e.g., [0, 1, 2, 3])"
  },

  "debug": {
    "_comment": "Debugging options (disable in production)",
    "dump_packets": false,
    "_dump_note": "Dump all packet contents to log",
    "simulate_latency_ms": 0,
    "_latency_note": "Simulate network latency for testing",
    "crash_on_error": false,
    "_crash_note": "Crash on first error (for debugging with gdb)"
  }
}

/*
=============================================================================
SIMPLE KEY=VALUE FORMAT ALTERNATIVE
=============================================================================

If JSON parsing is not available, use this format:
Location: ~/.netnotes/config

# Socket Configuration
socket.path=/run/netnotes/notedaemon.sock
socket.dir=/run/netnotes
socket.group=input
socket.permissions=432

# Logging
logging.level=info
logging.stderr=false

# USB Configuration
usb.auto_detach_kernel=true
usb.timeout_ms=100
usb.discovery_interval_ms=1000

# Security
security.require_group=true
security.allow_root_bypass=true

# Performance
performance.max_queue_size=1000
performance.polling_interval_us=1000
performance.max_clients=10
performance.thread_pool_size=4

# Heartbeat
heartbeat.enabled=true
heartbeat.interval_ms=5000
heartbeat.timeout_ms=15000
heartbeat.max_missed=3

# Backpressure
backpressure.max_unacknowledged=100
backpressure.resume_threshold=50
backpressure.stale_connection_ms=30000

# Encryption
encryption.enabled=false
encryption.key_size=2048
encryption.cipher=aes-256-gcm

# Capabilities
capabilities.auto_detect=true
capabilities.default_mode=parsed
capabilities.allow_raw_mode=true
capabilities.allow_passthrough=false

# Device Settings
devices.keyboard.enabled=true
devices.keyboard.default_mode=parsed
devices.keyboard.filter_repeat_rate_ms=50

devices.mouse.enabled=true
devices.mouse.default_mode=parsed
devices.mouse.high_precision=false

devices.gamepad.enabled=true
devices.gamepad.default_mode=parsed

devices.touchpad.enabled=true
devices.touchpad.default_mode=parsed

# Filtering
filtering.enabled=false
filtering.debounce_ms=10
filtering.dead_zone=0.05

# Monitoring
monitoring.stats_enabled=true
monitoring.stats_interval_ms=60000
monitoring.event_logging=false

# Compatibility
compatibility.protocol_version=1
compatibility.strict_validation=true
compatibility.allow_legacy_clients=false

# Advanced
advanced.buffer_size=8192
advanced.event_batch_size=10
advanced.use_epoll=true

# Debug (disable in production)
debug.dump_packets=false
debug.simulate_latency_ms=0
debug.crash_on_error=false

=============================================================================
DEFAULT CONFIGURATION
=============================================================================

Just create ~/.netnotes/config with these settings:

{
  "socket": {
    "group": "netnotes"
  },
  "logging": {
    "level": "info"
  },
  "security": {
    "allowed_groups": ["netnotes"]
  }
}

All other settings will use sensible defaults.

=============================================================================
PRODUCTION CONFIGURATION (SECURE, OPTIMIZED)
=============================================================================

{
  "socket": {
    "path": "/run/netnotes/notedaemon.sock",
    "group": "netnotes",
    "permissions": 432
  },
  "logging": {
    "level": "warning",
    "stderr": false
  },
  "security": {
    "require_group": true,
    "allowed_groups": ["netnotes"],
    "allow_root_bypass": false
  },
  "performance": {
    "max_queue_size": 2000,
    "max_clients": 20,
    "thread_pool_size": 8
  },
  "heartbeat": {
    "enabled": true,
    "interval_ms": 3000,
    "timeout_ms": 10000
  },
  "encryption": {
    "enabled": true,
    "key_size": 4096
  },
  "monitoring": {
    "stats_enabled": true
  },
  "compatibility": {
    "strict_validation": true
  }
}

=============================================================================
DEVELOPMENT CONFIGURATION (DEBUG, VERBOSE)
=============================================================================

{
  "socket": {
    "group": "netnotes",
    "permissions": 438
  },
  "logging": {
    "level": "debug",
    "stderr": true
  },
  "security": {
    "require_group": false,
    "allow_root_bypass": true
  },
  "performance": {
    "max_clients": 5
  },
  "heartbeat": {
    "enabled": false
  },
  "monitoring": {
    "stats_enabled": true,
    "event_logging": true
  },
  "debug": {
    "dump_packets": true
  }
}
